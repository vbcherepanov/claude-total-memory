# Claude Total Memory — Global Rules

# Copy this content to ~/.claude/CLAUDE.md to enable automatic memory
# usage across ALL your projects.
#
# This works alongside project-level CLAUDE.md files.
# Global rules apply everywhere; project CLAUDE.md adds project-specific context.

## Persistent Memory (MCP)

You have access to a persistent memory system via MCP tools (memory_recall, memory_save, etc.).
This memory persists across sessions and projects. USE IT.

### Session Start — ALWAYS search memory first

At the start of every session, before doing any work:

```
memory_recall(query="<what the user is asking about>", project="<project-name>")
```

If you find relevant past knowledge, mention it briefly:
"I found previous context about this in memory: [brief summary]"

### Auto-Save Rules — save without asking

Save knowledge automatically after these events. Do NOT ask "should I save this?".

**SAVE when:**
- You make or help make an architectural decision → `type="decision"` (include WHY)
- You fix a non-trivial bug → `type="solution"` (symptom → cause → fix)
- You discover a gotcha or unexpected behavior → `type="lesson"`
- You set up or configure infrastructure → `type="fact"`
- You establish a project pattern or convention → `type="convention"`
- A session is ending → `type="fact"` (summary of what was done)

**DO NOT SAVE:**
- Trivial changes (typos, formatting, import ordering)
- Intermediate debugging steps
- Information that is obvious from the code

**Format:**
```
memory_save(
    content="Concise, actionable knowledge",
    type="decision|solution|lesson|fact|convention",
    project="project-name",
    tags=["relevant", "tags"],
    context="Why this matters. For decisions: why this was chosen over alternatives."
)
```

### Quality Guidelines

1. One topic per save — do not bundle unrelated knowledge
2. Always set `project` — enables filtered recall later
3. Always set `tags` — enables tag-based browsing
4. Be concise — future recall should be quick to scan
5. For decisions: always explain WHY and what alternatives were rejected
6. Duplicates are fine — the server auto-deduplicates

### Update Existing Knowledge

When you find that previously saved knowledge is outdated:
```
memory_update(find="search query for old record", new_content="corrected information", reason="why updating")
```

### Maintenance (periodic)

Run these occasionally to keep memory healthy:
```
memory_stats()                        # Check health score
memory_consolidate(dry_run=true)      # Preview merging similar records
memory_forget(dry_run=true)           # Preview archiving stale records
```
